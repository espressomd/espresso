% Do magic that \bfseries for keywords actually works
\usepackage{lmodern} % use the Latin Modern fonts

% Custom colors
\definecolor{stringblue}{rgb}{0.09,0.211,0.57}
\definecolor{codered}{rgb}{0.655,0.1137,0.3747}
\definecolor{deepgreen}{rgb}{0,0.5,0}
\definecolor{commentgray}{rgb}{0.4,0.4,0.4}
\definecolor{framegray}{rgb}{0.8,0.8,0.8}
\lstdefinestyle{pypressostyle}{
  language=Python,
  belowcaptionskip=1\baselineskip,
  breaklines=true,
  xleftmargin=\parindent,
  showstringspaces=false,
  stringstyle=\color{orange},
  belowskip=\bigskipamount,
  aboveskip=\bigskipamount,
  basicstyle=\ttfamily\small,
  otherkeywords={self},             % Add keywords here
  keywordstyle=\bfseries\color{codered},
  moredelim=*[s][]{.}{\ },
  moredelim=*[s][]{\ }{.},
  moredelim=*[s][]{.}{\[},
  emph={accuracy,
        actors,
        Actors,
        Actor,
        add,
        add_bond,
        Analysis,
        analyze,
        AngleCosine,
        AngleCossquare,
        AngleHarmonic,
        bjerrum_length,
        BondedInteraction,
        BondedInteractionNotDefined,
        BondedInteractions,
        bonded_inter,
        bonded_interaction_classes,
        box_l,
        cellsystem,
        CellSystem,
        COORDS_ALL_FIXED,
        COORDS_FIX_MASK,
        COORD_FIXED,
        cuda_init,
        CudaInitHandle,
        cutoff,
        Dihedral,
        electrostatics,
        Endangledist,
        epsilon, 
        espressomd,
        features,
        FeneBond,
        galilei,
        GalileiTransform,
        harmonic,
        HarmonicBond,
        HarmonicDumbbellBond,
        highlander,
        id,
        integrate,
        integrator,
        Integrator,
        interactions,
        lennard_jones,
        minimize_energy,
        MinimizeEnergy,
        non_bonded_inter, 
        NonBondedInteraction,
        NonBondedInteractionHandle,
        NonBondedInteractions,
        OifGlobalForces,
        OifLocalForces,
        OrderedDict,
        Overlapped,
        part,
        particle_data,
        PARTICLE_EXT_FORCE,
        PARTICLE_EXT_TORQUE,
        ParticleHandle,
        ParticleList,
        ParticleSlice,
        polymer,
        Polymer,
        pos,
        P3M,
        q,
        RigidBond,
        run,
        set_params,
        set_steepest_descent,
        shift,
        sigma,
        steps,
        System,
        Tabulated,
        ThereCanOnlyBeOne,
        thermostat,
        Thermostat,
        time_step,
        update_wrapper,
        utils,
        v,
        Virtual},          % Custom highlighting
  emphstyle=\bfseries\color{deepgreen},    % Custom highlighting style
  commentstyle=\color{commentgray}\ttfamily,
  stringstyle=\color{stringblue},
  frame=tb,                         % Any extra options here
  rulecolor=\color{framegray},
  showstringspaces=false            % 
}

% Python environment
\lstnewenvironment{pypresso}{\lstset{style=pypressostyle}}{}

% Python for external files
\newcommand\pypressoexternal[2][]{{
\lstset{style=pypressostyle}\lstinputlisting[#1]{#2}}}

% Python for inline
\newcommand\pypressoinline[1]{{\lstset{style=pypressostyle}\lstinline!#1!}}
